<!DOCTYPE html>
<html>
<body>

<textarea id="textEntry" rows="4" cols="50">
blah blah blah paste text here, hit enter
</textarea>

<textarea id="textOutput" rows="4" cols="50">
some bullshit will be output here idk
</textarea>

<script type="text/javascript">
//On 'Enter', interpret the content of the textEntry box. 
document.getElementById("textEntry").addEventListener('keypress', function (e) {
  var key = e.which || e.keyCode;
    if (key == 13 && !e.shiftKey) { // 13 is enter
      e.preventDefault()
      //Get the value of the text
      var text = document.getElementById("textEntry").value;
      var numLines = 2;
      var chunks = chunkit(text, numLines);
      document.getElementById("textOutput").value = chunks;
    }
  });
  
function chunkit(text, numLines) {
  //Split into sentences so that we can join them into the correct things. 
  //Look for the end of a line (.?!), followed by a space (\s), followed by the start of a new sentece (A-Za-z0-9)
  //Then split on this.
  var sentences = text.replace(/([.?!])\s*(?=[A-Za-z0-9])/g, "$1|").split(/[|\n]+/);
  //Break the text into chunks of [numLines] sentences
  var chunks = [];
  var chunk = "";
  var numscanned = 0;
  for(i = 0; i < sentences.length; i++){
    chunk += sentences[i] + " ";
    numscanned++;
    if (numscanned == numLines || i + 1 == sentences.length) {
      chunks.push(chunk.trim());
      chunk = "";
      numscanned = 0;
    }
  }
</script>

</body>
</html>
